<!DOCTYPE html>
<html lang="es">
<head>
<link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>Espermatogénesis</title>


<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fcor/arjs-gestures@master/gesture-detector.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fcor/arjs-gestures@master/gesture-handler.js"></script>
<!--<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/1.12.0/model-viewer.min.js"></script> Son librerias para que funcione lo de los modelos en la parte del model viewer-->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

</head>
<body>

<div id="info">
<div class="titulo-con-imagenes">
<h1>Museo de Embriología</h1>
<img src="https://github.com/KelvinRiv/Proyecto/blob/main/imagenes/Marca%20de%20agua%20museo.png?raw=true" alt="Marca de agua museo">
</div>
<h2>Espermatogénesis</h2>

        <h3>Universidad Autónoma de Chihuahua</h3>
        <p>La embriología es el estudio del desarrollo de un embrión desde la fecundación del óvulo hasta la octava semana de gestación. Este campo científico es fundamental para comprender cómo se forman los organismos y las estructuras celulares básicas que dan origen a la vida.</p>
        <p>Con esta aplicación usted podrá obtener una experiencia de realidad aumentada donde podrá ver modelos 3D animados de la espermatogénesis. Simplemente inicie la cámara y apunte al marcador Hiro para visualizar el contenido.</p>
  <div id="menu-modelos">
<h3>Si desea una experiencia inmersiva en la embriología da click en el botón de abajo</h3>
    <button data-model="testiculo"> Experiencia AR </button>
  </div>
</div>

<div id="modal-modelo" class="modal">
  <div class="modal-content">
    <h2 id="modal-titulo"></h2>
    <p id="modal-descripcion"></p>
    <button id="start-ar">Iniciar Realidad Aumentada</button>
    <button id="cerrar-modal">Cerrar</button>
  </div>
</div>

<div class="hamburger-menu">
    <input id="menu__ham" type="checkbox" />
    <label class="menu__btn" for="menu__ham" >
      <span></span>
    </label>

    <ul class="menu__box">
      <li><a class="menu__item" href="#" id="redsem-btn">Tubos seminiferos</a></li>
      <li><a class="menu__item" href="#" id="esp-btn">Espermatogénesis</a></li>
      <li><a class="menu__item" href="#">Animación</a></li>
    </ul>
  </div>

  <div id="redsem-moda" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">
    <div style="background: rgb(218, 218, 218); padding: 20px; width: 80%; height: 80%;" position = 'fixed' >
    <model-viewer
    src="https://raw.githubusercontent.com/KelvinRiv/Proyecto/main/RedSeminifera.glb" 
    alt="RedSeminifera"
    camera-controls
    shadow-intensity = "1"
    style="width: 100%; height: 90%;"
    >
    </model-viewer>
    <button id="cerrar-redsem-btn">Cerrar</button>
    </div>
</div>
<div id="esp-moda" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">
    <div style="background: rgb(0, 0, 0); padding: 20px; width: 100%; height: 100%;">
      <video width="90%" height="70%" controls class="tamañovideo1">
        <source src="https://github.com/KelvinRiv/Proyecto/raw/refs/heads/main/Camino%20de%20juanito.mp4" type="video/mp4">
      </video>
    <button id ="abririnf1">Información</button>
      <div id="Infovideo" class = "modalvideo">
        <div class ="ModalVidCont">
        <span class="Cerrarinfvid">&times;</span>
            <h2>Recorrido de juanito</h2>
              <div class="textoinfor">
                <img src="https://github.com/KelvinRiv/Proyecto/blob/main/imagenes/Marca%20de%20agua%20museo.png?raw=true" alt="Marca de agua museo" class="marca-de-agua">
                <p>El transporte de los espermatozoides comienza profundamente en el tracto reproductor masculino, donde la maduración estructural y funcional del gameto está intrínsecamente ligada a su tránsito. La espermatogénesis ocurre en los túbulos seminíferos, y en este proceso las células espermáticas en desarrollo están unidas a las células de Sertoli. La espermatogonia tipo B, al entrar en el estadio de preleptoteno de la primera división meiótica, está situada basal a la barrera hemato-testicular (BHT), mientras que las espermátidas en estadios posteriores están fijas a la superficie apical de las células de Sertoli mediante complejos de adhesión. Para su liberación a la luz del túbulo seminífero, los complejos de adhesión de superficie se rompen. Esta degradación genera fragmentos de laminina que actúan sobre las proteínas de los complejos de unión estrecha de la BHT, rompiéndola apicalmente al espermatocito primario. Seguidamente, la testosterona, altamente concentrada en el túbulo seminífero, estimula la síntesis de nuevas proteínas de unión estrecha en el lado basal del espermatocito en preleptoteno, restaurando así la integridad de la BHT. Tras la espermiogénesis, el espermatozoide es maduro a nivel morfológico, pero es inmóvil e incapaz de fecundar un óvulo.</p>
                <p>A continuación, el líquido testicular los transporta de forma pasiva desde los túbulos seminíferos, pasando por los túbulos rectos y la red testicular, hasta la cabeza del epidídimo a través de los conductillos eferentes. El impulso inicial para este movimiento pasivo proviene de la presión del líquido generada en los túbulos seminíferos, asistida por las contracciones de las células mioides fuera de los túbulos seminíferos. El progreso es luego ayudado por las contracciones del músculo liso y las corrientes ciliares en los conductillos eferentes.</p>
                <p>El espermatozoide entra entonces en el conducto del epidídimo, un tubo muy contorneado que mide unos 6 metros en el humano, donde permanece aproximadamente 12 días. Este es el periodo crucial de maduración bioquímica. Durante esta fase, el espermatozoide adquiere una serie de capacidades y sufre cambios asociados a las glucoproteínas de la membrana plasmática de su cabeza. Estos cambios incluyen el aumento progresivo de la motilidad y de la capacidad para fertilizar el óvulo, la maduración del acrosoma, la reorganización molecular de la membrana plasmática, la adquisición de los receptores para las proteínas de la zona pelúcida, el aumento del enlace disulfuro entre las nucleoproteínas, la regionalización de los residuos glicosídicos de superficie, y la acumulación de residuos manosilados en la membrana plasmática periacrosómica. Es importante destacar que los espermatozoides carecen de movilidad durante su fase de almacenamiento en el epidídimo, pero en el momento en que alcanzan la cola ya son capaces de fecundar un óvulo.</p>
                <p>El siguiente paso ocurre durante la emisión, que es la primera fase de la eyaculación refleja. Los espermatozoides son transportados rápidamente desde el epidídimo, atravesando con velocidad el conducto deferente gracias a las contracciones peristálticas de su cubierta muscular gruesa. El semen, ya con espermatozoides, alcanza la uretra prostática a través de los conductos eyaculadores. Durante este tránsito, se mezclan con las secreciones líquidas de las glándulas sexuales accesorias (vesículas seminales, próstata y glándulas bulbouretrales). Las vesículas seminales aportan líquido alcalino (aproximadamente el 70% del total) con mucha fructosa, la principal fuente de energía de los espermatozoides, y prostaglandinas. La próstata aporta secreción ácida (pH 6,5, aproximadamente el 20% del total), rica en ácido cítrico, fosfatasa ácida, zinc e iones de magnesio. El volumen de semen resultante (2 a 6 ml) tiene un pH normal entre 7,2 y 7,8 y contiene entre 40 y 250 millones de espermatozoides. Es en el eyaculado donde los espermatozoides adquieren movilidad.</p>
                <p>La fase final en el hombre es la eyaculación, donde el semen sale de la uretra a través de su orificio externo. Esto se logra mediante el cierre del esfínter vesical, la contracción del músculo uretral y la contracción de los músculos bulboesponjosos, impulsando el semen a través de la uretra prostática, uretra membranosa y uretra peniana.</p>
            </div>
        </div>
      </div>
    <button id="cerrar-esp-btn">Cerrar</button>
    </div>
</div>


    <button id="exit-ar">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M18.3 5.71a1 1 0 0 0-1.42 0L12 10.59 7.11 5.7a1 1 0 0 0-1.42 1.42L10.59 12l-4.9 4.89a1 1 0 0 0 1.42 1.42L12 13.41l4.89 4.9a1 1 0 0 0 1.42-1.42L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z"/>
    </svg>
    Salir
  </button>

    <div id="ar-container"></div>

<script>
    const info = document.getElementById('info');
    const arContainer = document.getElementById('ar-container');
    const exitBtn = document.getElementById('exit-ar');

    const menubtn = document.getElementsByClassName('menu__btn')
    const menu__btn = menubtn[0]
    
  // Modal
    const modal = document.getElementById('modal-modelo');
    const modalTitulo = document.getElementById('modal-titulo');
    const modalDescripcion = document.getElementById('modal-descripcion');
    const startBtn = document.getElementById('start-ar');
    const cerrarModal = document.getElementById('cerrar-modal');
    const modalvideo = document.getElementById('Infovideo');
    const spanCerrar = document.getElementsByClassName("Cerrarinfvid")[0];
    
  // Información de cada modelo
  const modelosInfo = {
    testiculo: {
      titulo: "Modelos de espermatogénesis",
      descripcion: 'Al hacer click en el botón de "Iniciar Realidad aumentada", se abrira una nueva pestaña donde necesitaremos que nos permitas acceder a tu cámara y que aceptes otros permisos, asegurate de aceptarlos para que todo funcione correctamente, en caso de no aceptarlos, puedes presionar el botón de salir y volver a la página de inicio. No nos quedamos con ningun dato de los usuarios, todo se borra al salir de la página'
    }
  };
    const abrirBtn = document.getElementById('redsem-btn');
    const abriresp = document.getElementById('esp-btn');
    const cerrarBtn = document.getElementById('cerrar-redsem-btn');
    const cerraresp = document.getElementById('cerrar-esp-btn');
    const moda = document.getElementById('redsem-moda');
    const modalesp = document.getElementById('esp-moda');

    abririnf1.onclick = function() {
    modalvideo.style.display = "block";
    };
    spanCerrar.onclick = function() {
  modalvideo.style.display = "none";
};

    abrirBtn.addEventListener('click', (e) => {
        e.preventDefault(); 
        
        moda.style.display = 'flex'; 
  });
    abriresp.addEventListener('click', (e) => {
        e.preventDefault(); 
        
        modalesp.style.display = 'flex'; 
  });
    cerrarBtn.addEventListener('click', () => {
        moda.style.display = 'none'; 
  });
    cerraresp.addEventListener('click', () => {
        modalesp.style.display = 'none'; 
  });
    abririnf1.addEventListener('click', (e) => {
        e.preventDefault(); 
        
        modalesp.style.display = 'flex'; 
  });
  // Cuando se da clic en un modelo
  document.querySelectorAll('#menu-modelos button').forEach(btn => {
    btn.addEventListener('click', () => {
      const modelKey = btn.getAttribute('data-model');
      const modelData = modelosInfo[modelKey];
      modalTitulo.textContent = modelData.titulo;
      modalDescripcion.textContent = modelData.descripcion;
      modal.style.display = 'flex';

      // Guardar modelo elegido
      startBtn.dataset.model = modelKey;
    });
});


  // Cerrar modal
  cerrarModal.addEventListener('click', () => {
    modal.style.display = 'none';
  });


  // Iniciar AR al presionar el botón del modal
  startBtn.addEventListener('click', () => {
    modal.style.display = 'none';
    info.style.display = 'none';
    exitBtn.style.display = 'flex';
    arContainer.style.display = 'block';

    menu__btn.classList.add('active');

    const modelKey = startBtn.dataset.model;


    // Crear la escena AR (código existente)
    const scene = document.createElement('a-scene');
    scene.setAttribute('embedded', '');
    scene.setAttribute('arjs', '');
    scene.setAttribute('gesture-detector', '');

    // Seleccionar modelo según el elegido
    let marker = document.createElement('a-marker');
    let model = document.createElement('a-entity');

    if (modelKey === "testiculo") {
      marker.setAttribute('type', 'pattern');
      marker.setAttribute('patternUrl', 'https://raw.githubusercontent.com/KelvinRiv/Proyecto/main/pattern-marcaCreeper.patt');
      model.setAttribute('gltf-model', 'https://raw.githubusercontent.com/KelvinRiv/Proyecto/main/gears.glb');
      model.setAttribute('scale', '0.1 0.1 0.1');
    }

    model.setAttribute('gesture-handler', '');
    marker.appendChild(model);
    scene.appendChild(marker);


    const camera = document.createElement('a-entity');
    camera.setAttribute('camera', '');
    scene.appendChild(camera);

    arContainer.innerHTML = '';
    arContainer.appendChild(scene);
  });

  // Botón para salir de AR
  exitBtn.addEventListener('click', () => {
    arContainer.style.display = 'none';
    arContainer.innerHTML = '';
    info.style.display = 'block';
    exitBtn.style.display = 'none';
    menu__btn.classList.remove('active');
    const video = document.querySelector('video');
    if (video && video.srcObject) {
      const stream = video.srcObject;
      const tracks = stream.getTracks();
      tracks.forEach(track => track.stop());
      video.srcObject = null;
    }


        setTimeout(() => { window.location.reload(); }, 300); /*Este script es el que hace que vuelva a la página principal*/
  });
  

</script>


</body>
</html>
